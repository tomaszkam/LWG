<?xml version='1.0' encoding='utf-8' standalone='no'?>
<!DOCTYPE issue SYSTEM "lwg-issue.dtd">

<issue num="4524" status="New">
<title>Wrong deduced return type in [exec.schedule.from]</title>
<section><sref ref="[exec.schedule.from]"/></section>
<submitter>Brian Bi</submitter>
<date>20 Jan 2026</date>
<priority>2</priority>

<discussion>
<p>
I think there's a problem in the definition of <tt><i>receiver-type</i></tt> in 
<sref ref="[exec.schedule.from]"/> p10:
<p/>
When <tt><i>state-type</i></tt> is instantiated, `operation_t` must be determined. 
To determine `operation_t`, we need to know the environment type for `receiver_t`, 
which requires instantiating the definition of `receiver_t::get_env` because of the 
deduced return type. That definition requires <tt><i>state-type</i></tt> to be 
already complete because it uses <tt><i>state</i>-&gt;<i>rcvr</i></tt>, so we 
have a circular dependency.
<p/>
The return type should probably be written out explicitly as 
<tt><i>FWD-ENV-T</i>(env_of_t&lt;Rcvr&gt;)</tt> or something like that (except that 
it seems like `Rcvr` is already "out of scope" here, so I don't know how to word it exactly).
</p>

<note>2026-02-27; Reflector poll.</note>
<p>
Set priority to 2 after reflector poll.
</p>
</discussion>

<resolution>
</resolution>

</issue>
